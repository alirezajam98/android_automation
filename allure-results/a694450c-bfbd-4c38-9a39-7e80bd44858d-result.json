{"name": "test_kyc", "status": "broken", "statusDetails": {"message": "selenium.common.exceptions.StaleElementReferenceException: Message: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception\nStacktrace:\nio.appium.uiautomator2.common.exceptions.StaleElementReferenceException: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore\n\tat io.appium.uiautomator2.model.ElementsCache.restore(ElementsCache.java:117)\n\tat io.appium.uiautomator2.model.ElementsCache.get(ElementsCache.java:153)\n\tat io.appium.uiautomator2.handler.GetElementAttribute.safeHandle(GetElementAttribute.java:23)\n\tat io.appium.uiautomator2.handler.request.SafeRequestHandler.handle(SafeRequestHandler.java:59)\n\tat io.appium.uiautomator2.server.AppiumServlet.handleRequest(AppiumServlet.java:259)\n\tat io.appium.uiautomator2.server.AppiumServlet.handleHttpRequest(AppiumServlet.java:253)\n\tat io.appium.uiautomator2.http.ServerHandler.channelRead(ServerHandler.java:77)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:435)\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267)\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:250)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:266)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1294)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:911)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:611)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:552)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:466)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:438)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\n\tat io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\n\tat java.lang.Thread.run(Thread.java:1012)", "trace": "open_app_without_login = <appium.webdriver.webdriver.WebDriver (session=\"5bfeaf2d-a570-400e-9ebf-af3204212fa2\")>\n\n    @pytest.mark.order(1)\n    @allure.feature(\"User Account Creation\")\n    @allure.story(\"Create a new user account\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_kyc(open_app_without_login):\n        driver = open_app_without_login\n        accept_page = AcceptRulesAndRegulations(driver)\n        # بارگذاری فایل JSON برای دریافت متون مرجع\n        text_reference = load_text_reference()\n    \n        # متغیر برای ذخیره نتیجه تست\n        errors = []\n        try:\n            # بررسی دسترسی نوتیفیکیشن\n            notification_permission_page = NotificationPermissionPage(driver)\n            notification_permission_page.allow_notification_permission()\n            logger.info(\"Clicked on 'Allow' button for notification permission.\")\n    \n            # مرحله 1: کلیک روی دکمه 'ایجاد حساب کاربری'\n            try:\n                with allure.step(\"Click on 'Create Account' button\"):\n                    logger.info(\"کلیک روی دکمه 'ایجاد حساب کاربری'...\")\n                    create_account_button = WebDriverWait(driver, 10).until(\n                        EC.presence_of_element_located((AppiumBy.ID, \"com.samanpr.blu.dev:id/openButton\"))\n                    )\n                    create_account_button.click()\n                    logger.info(\"دکمه 'ایجاد حساب کاربری' کلیک شد.\")\n            except TimeoutException:\n                logger.info(\"No login page displayed, continuing.\")\n            try:\n                notification_permission_page = NotificationPermissionPage(driver)\n                notification_permission_page.allow_notification_permission()\n                logger.info(\"Clicked on 'Allow' button for notification permission.\")\n            except TimeoutException:\n                logger.info(\"No notification permission modal displayed, continuing.\")\n            # مرحله 2: کلیک روی دکمه 'بازکردن حساب'\n            with allure.step(\"Click on 'Open Account' button\"):\n                logger.info(\"کلیک روی دکمه 'بازکردن حساب'...\")\n                open_account_page = OpenAccountPage(driver)\n                open_account_page.click_open_account()\n                logger.info(\"دکمه 'بازکردن حساب' کلیک شد.\")\n    \n            # مرحله 3: انتخاب UAT در سرور\n            with allure.step(\"click on 'UAT' from server selection\"):\n                logger.info(\"انتخاب سرور 'UAT'...\")\n                select_server_page = SelectServerPage(driver)\n                select_server_page.select_uat_server()\n                logger.info(\"سرور 'UAT' انتخاب شد.\")\n    \n            # مرحله 4: کلیک روی 'شروع'\n            with allure.step(\"Click on 'Start' button\"):\n                logger.info(\"کلیک روی دکمه 'شروع'...\")\n                create_account_info_page = CreateAccountInfoPage(driver)\n                create_account_info_page.click_start()\n                logger.info(\"دکمه 'شروع' کلیک شد.\")\n    \n            # بررسی وضعیت اولیه سوییچ\n            with allure.step(\"Check initial state of the switch\"):\n                initial_status = accept_page.is_switch_on()\n                logger.info(f\"Initial switch status: {'ON' if initial_status else 'OFF'}\")\n                allure.attach(f\"Initial switch status: {'ON' if initial_status else 'OFF'}\", \"Switch Status\",\n                              allure.attachment_type.TEXT)\n    \n            # تغییر وضعیت سوییچ\n            with allure.step(\"Toggle the agreement switch\"):\n                logger.info(\"کلیک بر روی تاگل سوییچ موافقت با قوانین و مقررات ...\")\n                accept_page.toggle_switch()  # استفاده از متد toggle_switch\n                new_status = accept_page.is_switch_on()\n                logger.info(f\"Switch status after toggle: {'ON' if new_status else 'OFF'}\")\n                allure.attach(f\"New switch status: {'ON' if new_status else 'OFF'}\", \"Switch Status After Toggle\",\n                              allure.attachment_type.TEXT)\n    \n            # کلیک روی دکمه تایید بعد از تغییر وضعیت\n            with allure.step(\"Click confirm button after toggle\"):\n                logger.info(\"کلیک روی دکمه تایید...\")\n                accept_page.click_confirm_button()\n                logger.info(\"دکمه تایید کلیک شد و به صفحه وارد کردن شماره تلفن هدایت شد.\")\n            # مرحله 2: وارد کردن شماره تلفن\n            with allure.step(\"Enter phone number\"):\n                logger.info(\"ورود شماره تلفن ...\")\n                # فراخوانی تابع mobile_number_generator برای تولید شماره موبایل\n                phone_number = mobile_number_generator()\n                phone_page = EnterPhoneNumberPage(driver)\n                phone_page.enter_phone_number(phone_number)\n    \n            logger.info(f\"شماره تلفن وارد شد: {phone_number}\")\n    \n            # مرحله 3: کلیک روی دکمه \"بعدی\"\n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                phone_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            with allure.step(\"Check 'مانند:‌ MDMGKP' text\"):\n                logger.info(\"بررسی متن ریفرال...\")\n                expected_text = text_reference[\"kyc_pages\"][\"referralInputEditText\"]\n    \n                # استفاده از شیء درست برای فراخوانی متد\n                referral_page = ReferralPage(driver)\n                actual_text = referral_page.get_referral_field_text()  # به درستی شیء ReferralPage استفاده می‌شود\n    \n                assert actual_text == expected_text, \\\n                    f\"Expected '{expected_text}', but got '{actual_text}'\"\n                logger.info(f\"متن ریفرال صحیح است: {actual_text}\")\n    \n            with (allure.step(\"Click next button\")):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                referral_page = ReferralPage(driver)\n                referral_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            # بررسی متن کد ملی\n            with allure.step(\"Check 'کد ملی ۱۰ رقمی' text\"):\n                logger.info(\"بررسی متن کد ملی...\")\n                expected_text = text_reference[\"kyc_pages\"][\"national_code\"]\n    \n                # استفاده از شیء درست برای فراخوانی متد\n                national_page = NationalCodePage(driver)\n                actual_text = national_page.get_national_code_text()  # به درستی شیء national_page استفاده می‌شود\n    \n                assert actual_text == expected_text, \\\n                    f\"Expected '{expected_text}', but got '{actual_text}'\"\n                logger.info(f\"متن کد ملی صحیح است: {actual_text}\")\n    \n            with allure.step(\"Enter national code\"):\n                logger.info(\"ورود کد ملی ...\")\n    \n                try:\n                    # فراخوانی تابع national_code_generator برای تولید کد ملی\n                    national_code = national_code_generator()\n                    national_code_page = NationalCodePage(driver)\n    \n                    # افزایش زمان انتظار به 20 ثانیه\n                    national_code_page.enter_national_code(national_code)\n                    logger.info(f\"کدملی وارد شد: {national_code}\")\n    \n                except TimeoutException as e:\n                    logger.error(f\"خطا در پیدا کردن فیلد کد ملی: {e}\")\n                    capture_screenshot(driver, \"national_code_error\")\n                    raise e\n    \n            # مرحله 3: کلیک روی دکمه \"بعدی\"\n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                national_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            with allure.step(\"Scroll year field\"):\n                birth_date_page = BirthDatePage(driver)\n                birth_date_page.scroll_year()  # اسکرول کردن سال\n                logger.info(\"سال با موفقیت اسکرول شد.\")\n    \n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                birth_date_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            with allure.step(\"write new username\"):\n                logger.info(\"وارد کردن نام کاربری ...\")\n                try:\n                    # فراخوانی تابع username_generator برای تولید کد ملی\n                    username = username_generator()\n                    username_page = UserNamePage(driver)\n                    username_page.enter_username(username)\n                    logger.info(f\"نام کاربری وارد شد: {username}\")\n    \n                except TimeoutException as e:\n                    logger.error(f\"خطا در پیدا کردن فیلد نام کاربری: {e}\")\n                    capture_screenshot(driver, \"username_field_error\")\n                    raise e\n    \n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                username_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            with allure.step(\"Enter password\"):\n                logger.info(\"وارد کردن رمز عبور\")\n                password_page = PasswordPage(driver)\n                password_page.enter_password(\"Aa123456\")\n                logger.info(\"رمز عبور وارد شد.\")\n    \n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'بعدی'...\")\n                password_page.click_next_button()\n                logger.info(\"دکمه 'بعدی' کلیک شد.\")\n    \n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'ادامه'...\")\n                create_account_in_blu_state_page = CreateAccountInBluStatePage(driver)\n                create_account_in_blu_state_page.click_confirm_button()\n                logger.info(\"دکمه 'ادامه' کلیک شد.\")\n    \n            with allure.step(\"select national card button\"):\n                logger.info(\"کلیک روی دکمه 'ساخت اکانت با کارت ملی'...\")\n                select_national_card = SelectNationalCardOrTrackerIdPage(driver)\n                select_national_card.click_select_national_card()\n                logger.info(\"دکمه 'ساخت اکانت با کارت ملی' کلیک شد.\")\n    \n            try:\n                camera_permission_page = NotificationPermissionPage(driver)\n                camera_permission_page.allow_camera_permission()\n                logger.info(\"Clicked on 'Allow' button for camera permission.\")\n            except TimeoutException:\n                logger.info(\"No notification permission modal displayed, continuing.\")\n    \n            with allure.step(\"Take photo from front of nationalcard\"):\n                logger.info(\"کلیک بر روی دکمه شاتر برای 'عکس جلوی کارت ملی'...\")\n                take_photo_page = TakePhotoPage(driver)\n                take_photo_page.click_take_photo()\n                logger.info(\"دکمه شاتر برای عکس برداری کلیک شد.\")\n    \n            with allure.step(\"Click confirm button\"):\n                logger.info(\"کلیک روی دکمه تایید...\")\n                confirm_photo_page = ConfirmPhotoPage(driver)\n                confirm_photo_page.click_confirm_photo()\n                logger.info(\"دکمه تایید کلیک شد.\")\n    \n            with allure.step(\"Click confirm button\"):\n                logger.info(\"کلیک روی دکمه تایید...\")\n                confirm_photo_modal = ConfirmPhotoModal(driver)\n                confirm_photo_modal.click_confirm_photo()\n                logger.info(\"دکمه تایید کلیک شد.\")\n    \n            with allure.step(\"Take photo from back of nationalcard\"):\n                logger.info(\"کلیک بر روی دکمه شاتر برای 'عکس پشت کارت ملی'...\")\n                take_photo_page = TakePhotoPage(driver)\n                take_photo_page.click_take_photo()\n                logger.info(\"دکمه شاتر برای عکس برداری کلیک شد.\")\n    \n            with allure.step(\"Click confirm button for back card\"):\n                logger.info(\"کلیک روی دکمه تایید...\")\n                confirm_photo_page = ConfirmPhotoPage(driver)\n                confirm_photo_page.click_confirm_photo()\n                logger.info(\"دکمه تایید کلیک شد.\")\n    \n            with allure.step(\"Click confirm button\"):\n                logger.info(\"کلیک روی دکمه تایید...\")\n                confirm_photo_modal = ConfirmPhotoModal(driver)\n                confirm_photo_modal.click_confirm_photo()\n                logger.info(\"دکمه تایید کلیک شد.\")\n    \n            with allure.step(\"Click next button\"):\n                logger.info(\"کلیک روی دکمه 'ادامه'...\")\n                create_account_in_blu_state_page = CreateAccountInBluStatePage(driver)\n                create_account_in_blu_state_page.click_confirm_button()\n                logger.info(\"دکمه 'ادامه' کلیک شد.\")\n    \n            with allure.step(\"Select job for user\"):\n                logger.info(\"کلیک بر روی اولین شغل\")\n                select_job_page = SelectJobPage(driver)\n                select_job_page.select_job()\n                logger.info(\"اولین شغل از لیست انتخاب شد.\")\n                logger.info(\"کلیک روی دکمه تایید...\")\n                select_job_page.click_confirm_job()\n                logger.info(\"دکمه 'ادامه' کلیک شد.\")\n    \n            with allure.step(\"show and skip demo video\"):\n                logger.info(\"ویدیو آموزشی نحوه ارسال ویدیو در حال پخش است...\")\n                video_demo_page = VideoDemoPage(driver)\n                video_demo_page.click_confirm_video_demo()\n                logger.info(\"دکمه 'ادامه' کلیک شد.\")\n    \n            try:\n                camera_permission_page = NotificationPermissionPage(driver)\n                camera_permission_page.allow_camera_permission()\n                logger.info(\"Clicked on 'Allow' button for camera permission.\")\n            except TimeoutException:\n                logger.info(\"No notification permission modal displayed, continuing.\")\n    \n            with allure.step(\"record video\"):\n                logger.info(\"کلیک روی دکمه ریکورد ویدیو\")\n                video_record_page = VideoRecordingPage(driver)\n                video_record_page.click_video_recording()\n                logger.info(\"ویدیو در حال ضبط شدن است...\")\n                sleep(10)\n                video_record_page.click_stop_recording_button()\n                logger.info(\"توقف ضبط ویدیو.\")\n                logger.info(\"کلیک روی آپلود ویدیو\")\n                video_record_page.click_upload_video()\n                logger.info(\"ویدیو در حال آپلود است...\")\n                confirm_video_modal = ConfirmVideoModal(driver)\n                confirm_video_modal.click_confirm_video()\n                logger.info(\"کلیک روی تایید آپلود ویدیو\")\n                final_page = FinalPage(driver)\n                final_page.click_final_confirm()\n                logger.info(\"مراحل ایجاد حساب کاربری با موفقیت به پایان رسید\")\n    \n        except Exception as e:\n    \n            logger.error(f\"خطا رخ داد: {e}\")\n            capture_screenshot(driver, \"account_creation_error\")\n>           raise e\n\ntests\\kyc\\test_create_account.py:322: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ntests\\kyc\\test_create_account.py:290: in test_kyc\n    video_demo_page.click_confirm_video_demo()\npages\\kyc\\kyc_pages.py:302: in click_confirm_video_demo\n    WebDriverWait(self.driver, 30).until(\nC:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py:96: in until\n    value = method(self._driver)\npages\\kyc\\kyc_pages.py:303: in <lambda>\n    lambda driver: self.driver.find_element(*button_locator).is_enabled()\nC:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py:192: in is_enabled\n    return self._execute(Command.IS_ELEMENT_ENABLED)[\"value\"]\nC:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py:395: in _execute\n    return self._parent.execute(command, params)\nC:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py:354: in execute\n    self.error_handler.check_response(response)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <appium.webdriver.errorhandler.MobileErrorHandler object at 0x0000022E2068A8E0>\nresponse = {'status': 404, 'value': '{\"value\":{\"error\":\"stale element reference\",\"message\":\"The element \\'By.id: com.samanpr.blu....tory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\\\\n\\\\tat java.lang.Thread.run(Thread.java:1012)\\\\n\"}}'}\n\n    def check_response(self, response: Dict[str, Any]) -> None:\n        \"\"\"\n        https://www.w3.org/TR/webdriver/#errors\n        \"\"\"\n        payload = response.get('value', '')\n        if isinstance(payload, dict):\n            payload_dict = payload\n        else:\n            try:\n                payload_dict = json.loads(payload)\n            except (json.JSONDecodeError, TypeError):\n                return\n            if not isinstance(payload_dict, dict):\n                return\n        value = payload_dict.get('value')\n        if not isinstance(value, dict):\n            return\n        error = value.get('error')\n        if not error:\n            return\n    \n        message = value.get('message', error)\n        stacktrace = value.get('stacktrace', '')\n        # In theory, we should also be checking HTTP status codes.\n        # Java client, for example, prints a warning if the actual `error`\n        # value does not match to the response's HTTP status code.\n        exception_class: Type[sel_exceptions.WebDriverException] = ERROR_TO_EXC_MAPPING.get(\n            error, sel_exceptions.WebDriverException\n        )\n        if exception_class is sel_exceptions.WebDriverException and message:\n            if message == 'No such context found.':\n                exception_class = appium_exceptions.NoSuchContextException\n            elif message == 'That command could not be executed in the current context.':\n                exception_class = appium_exceptions.InvalidSwitchToTargetException\n    \n        if exception_class is sel_exceptions.UnexpectedAlertPresentException:\n            raise sel_exceptions.UnexpectedAlertPresentException(\n                msg=message,\n                stacktrace=format_stacktrace(stacktrace),\n                alert_text=value.get('data'),\n            )\n>       raise exception_class(msg=message, stacktrace=format_stacktrace(stacktrace))\nE       selenium.common.exceptions.StaleElementReferenceException: Message: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception\nE       Stacktrace:\nE       io.appium.uiautomator2.common.exceptions.StaleElementReferenceException: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore\nE       \tat io.appium.uiautomator2.model.ElementsCache.restore(ElementsCache.java:117)\nE       \tat io.appium.uiautomator2.model.ElementsCache.get(ElementsCache.java:153)\nE       \tat io.appium.uiautomator2.handler.GetElementAttribute.safeHandle(GetElementAttribute.java:23)\nE       \tat io.appium.uiautomator2.handler.request.SafeRequestHandler.handle(SafeRequestHandler.java:59)\nE       \tat io.appium.uiautomator2.server.AppiumServlet.handleRequest(AppiumServlet.java:259)\nE       \tat io.appium.uiautomator2.server.AppiumServlet.handleHttpRequest(AppiumServlet.java:253)\nE       \tat io.appium.uiautomator2.http.ServerHandler.channelRead(ServerHandler.java:77)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\nE       \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\nE       \tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:435)\nE       \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293)\nE       \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267)\nE       \tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:250)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\nE       \tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:266)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\nE       \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1294)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\nE       \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\nE       \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:911)\nE       \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)\nE       \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:611)\nE       \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:552)\nE       \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:466)\nE       \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:438)\nE       \tat io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\nE       \tat io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\nE       \tat java.lang.Thread.run(Thread.java:1012)\n\nC:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\appium\\webdriver\\errorhandler.py:125: StaleElementReferenceException"}, "steps": [{"name": "Click on 'Create Account' button", "status": "passed", "start": 1729605295854, "stop": 1729605296662}, {"name": "Click on 'Open Account' button", "status": "passed", "start": 1729605296720, "stop": 1729605298473}, {"name": "click on 'UAT' from server selection", "status": "passed", "start": 1729605298473, "stop": 1729605298616}, {"name": "Click on 'Start' button", "status": "passed", "start": 1729605298616, "stop": 1729605300549}, {"name": "Check initial state of the switch", "status": "passed", "attachments": [{"name": "Switch Status", "source": "1b021ae5-aaf5-47e9-b58e-7284d36b1607-attachment.txt", "type": "text/plain"}], "start": 1729605300549, "stop": 1729605300618}, {"name": "Toggle the agreement switch", "status": "passed", "attachments": [{"name": "Switch Status After Toggle", "source": "3b910e49-9f52-46bb-a601-cb212791d774-attachment.txt", "type": "text/plain"}], "start": 1729605300618, "stop": 1729605301445}, {"name": "Click confirm button after toggle", "status": "passed", "start": 1729605301445, "stop": 1729605302612}, {"name": "Enter phone number", "status": "passed", "start": 1729605302612, "stop": 1729605303463}, {"name": "Click next button", "status": "passed", "start": 1729605303464, "stop": 1729605306198}, {"name": "Check 'مانند:‌ MDMGKP' text", "status": "passed", "start": 1729605306198, "stop": 1729605306292}, {"name": "Click next button", "status": "passed", "start": 1729605306292, "stop": 1729605307514}, {"name": "Check 'کد ملی ۱۰ رقمی' text", "status": "passed", "start": 1729605307514, "stop": 1729605307640}, {"name": "Enter national code", "status": "passed", "start": 1729605307640, "stop": 1729605308445}, {"name": "Click next button", "status": "passed", "start": 1729605308445, "stop": 1729605310339}, {"name": "Scroll year field", "status": "passed", "start": 1729605310339, "stop": 1729605310917}, {"name": "Click next button", "status": "passed", "start": 1729605310917, "stop": 1729605313106}, {"name": "write new username", "status": "passed", "start": 1729605313106, "stop": 1729605314562}, {"name": "Click next button", "status": "passed", "start": 1729605314562, "stop": 1729605315809}, {"name": "Enter password", "status": "passed", "start": 1729605315809, "stop": 1729605317221}, {"name": "Click next button", "status": "passed", "start": 1729605317221, "stop": 1729605317970}, {"name": "Click next button", "status": "passed", "start": 1729605317970, "stop": 1729605319925}, {"name": "select national card button", "status": "passed", "start": 1729605319925, "stop": 1729605321050}, {"name": "Take photo from front of nationalcard", "status": "passed", "start": 1729605321128, "stop": 1729605352428}, {"name": "Click confirm button", "status": "passed", "start": 1729605352428, "stop": 1729605354623}, {"name": "Click confirm button", "status": "passed", "start": 1729605354623, "stop": 1729605355509}, {"name": "Take photo from back of nationalcard", "status": "passed", "start": 1729605355509, "stop": 1729605387119}, {"name": "Click confirm button for back card", "status": "passed", "start": 1729605387119, "stop": 1729605389476}, {"name": "Click confirm button", "status": "passed", "start": 1729605389476, "stop": 1729605390692}, {"name": "Click next button", "status": "passed", "start": 1729605390692, "stop": 1729605391551}, {"name": "Select job for user", "status": "passed", "start": 1729605391551, "stop": 1729605394084}, {"name": "show and skip demo video", "status": "broken", "statusDetails": {"message": "selenium.common.exceptions.StaleElementReferenceException: Message: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception\nStacktrace:\nio.appium.uiautomator2.common.exceptions.StaleElementReferenceException: The element 'By.id: com.samanpr.blu.dev:id/continueButton' does not exist in DOM anymore\n\tat io.appium.uiautomator2.model.ElementsCache.restore(ElementsCache.java:117)\n\tat io.appium.uiautomator2.model.ElementsCache.get(ElementsCache.java:153)\n\tat io.appium.uiautomator2.handler.GetElementAttribute.safeHandle(GetElementAttribute.java:23)\n\tat io.appium.uiautomator2.handler.request.SafeRequestHandler.handle(SafeRequestHandler.java:59)\n\tat io.appium.uiautomator2.server.AppiumServlet.handleRequest(AppiumServlet.java:259)\n\tat io.appium.uiautomator2.server.AppiumServlet.handleHttpRequest(AppiumServlet.java:253)\n\tat io.appium.uiautomator2.http.ServerHandler.channelRead(ServerHandler.java:77)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:435)\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:293)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:267)\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:250)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:266)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:345)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1294)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:366)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:352)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:911)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:131)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:611)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:552)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:466)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:438)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\n\tat io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\n\tat java.lang.Thread.run(Thread.java:1012)\n\n", "trace": "  File \"G:\\android_automation\\tests\\kyc\\test_create_account.py\", line 290, in test_kyc\n    video_demo_page.click_confirm_video_demo()\n  File \"G:\\android_automation\\pages\\kyc\\kyc_pages.py\", line 302, in click_confirm_video_demo\n    WebDriverWait(self.driver, 30).until(\n  File \"C:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py\", line 96, in until\n    value = method(self._driver)\n  File \"G:\\android_automation\\pages\\kyc\\kyc_pages.py\", line 303, in <lambda>\n    lambda driver: self.driver.find_element(*button_locator).is_enabled()\n  File \"C:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py\", line 192, in is_enabled\n    return self._execute(Command.IS_ELEMENT_ENABLED)[\"value\"]\n  File \"C:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py\", line 395, in _execute\n    return self._parent.execute(command, params)\n  File \"C:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 354, in execute\n    self.error_handler.check_response(response)\n  File \"C:\\Users\\a.jamshidi\\android_automation\\android_automation\\.venv\\lib\\site-packages\\appium\\webdriver\\errorhandler.py\", line 125, in check_response\n    raise exception_class(msg=message, stacktrace=format_stacktrace(stacktrace))\n"}, "start": 1729605394084, "stop": 1729605406254}], "attachments": [{"name": "account_creation_error_20241022_172646.png", "source": "f3023a4b-1f32-4425-a18d-a296e832872a-attachment.png", "type": "image/png"}, {"name": "log", "source": "132ef818-0511-4b85-b017-ce7fcbe0cff1-attachment.txt", "type": "text/plain"}, {"name": "stderr", "source": "726ecf48-1efd-45f7-947a-5d8b16112883-attachment.txt", "type": "text/plain"}], "start": 1729605290356, "stop": 1729605407925, "uuid": "81db0b4d-0843-4d99-8a45-af41061e308a", "historyId": "190b09abcd6c5ed17aef79066d090e97", "testCaseId": "190b09abcd6c5ed17aef79066d090e97", "fullName": "tests.kyc.test_create_account#test_kyc", "labels": [{"name": "severity", "value": "critical"}, {"name": "story", "value": "Create a new user account"}, {"name": "feature", "value": "User Account Creation"}, {"name": "tag", "value": "order(1)"}, {"name": "parentSuite", "value": "tests.kyc"}, {"name": "suite", "value": "test_create_account"}, {"name": "host", "value": "ajamshidi-lap-qa"}, {"name": "thread", "value": "60576-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.kyc.test_create_account"}]}